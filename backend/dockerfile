# ---------- Backend Dockerfile ----------

# Use the official Node.js v22 image as the base
# (matches your local Node version: v22.18.0)
FROM node:22

# Set the working directory inside the container to /app
# All following commands will run from here
WORKDIR /app

# Copy package.json and package-lock.json (if present) into the container
# Doing this first allows Docker to cache dependencies separately
COPY package*.json ./

# Install only production dependencies (skips dev deps like nodemon)
# This keeps the image smaller and faster for production use
RUN npm install --only=production

# Copy the rest of your backend source code into the container
COPY . .

# Expose port 5000 (adjust this if your Express app listens on another port)
EXPOSE 5000

# Command to start the server inside the container
# Runs "node app/bin/www.js" which is your backend entry point
CMD ["npm", "run", "start"]
